name: Run Atomic Red Team tests

on: [push]

jobs:
  run-tests:
    runs-on: windows-latest
    steps:
      - uses: actions/checkout@v2
      - name: Set Execution Policy to Bypass
        run: | 
          Set-ExecutionPolicy Bypass -Scope Process -Force
        shell: powershell
      - name: Download Atomic Red Team
        run: |
          IEX (IWR 'https://raw.githubusercontent.com/redcanaryco/invoke-atomicredteam/master/install-atomicredteam.ps1' -UseBasicParsing); Install-AtomicRedTeam
        shell: powershell
          
      #- name: Install Atomic Red Team
      #  run: |
      #    powershell.exe Install-AtomicRedTeam -getAtomics
      #- name: Import Atomic Red Team Module
      #  run: |
      #   powershell.exe Import-Module "C:\AtomicRedTeam\invoke-atomicredteam\Invoke-AtomicRedTeam.psd1" -Force
